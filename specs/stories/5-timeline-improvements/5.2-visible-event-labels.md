### User Story 5.2

**Number:** `5.2`
**ID:** `BA-US-visible-event-labels`
**Role:** `player`
**Story:** `As a player, I want to see event dates and names displayed directly on the timeline at all times so that I can quickly identify events without needing to hover or click on them.`

**Context / Background:**
- In Epic 2, event information was only visible on hover or after clicking
- For improved usability, especially for kids who may not understand hover interactions, labels should always be visible
- Labels help players quickly scan the timeline and identify events of interest
- This is particularly important on mobile where hover doesn't exist
- Labels consist of two parts: date (e.g., "1450") and event name (e.g., "Printing Press")
- Educational goal: reinforce chronological awareness by making dates immediately visible

**Functional Requirements:**
1. Display a label for each event dot on the timeline showing the event date and name
2. Labels must be visible at all times, not just on hover or selection
3. Position labels near their corresponding event dots (above, below, or to the side of the arc)
4. Ensure labels do not overlap with the arc curve or event dots
5. Use clear, readable typography appropriate for kids (simple sans-serif font)
6. Labels should remain associated with their dots even when the arc scales or resizes
7. If space is very limited, show abbreviated labels (e.g., just the date or just the year)
8. On hover, optionally highlight or emphasize the label corresponding to the hovered event

**Non-Functional / UX Requirements:**
- Font size must be readable on all screen sizes (minimum 12px on mobile, 14-16px on desktop)
- Labels must have sufficient contrast against the background (dark text on light, or use background box)
- Labels should not obscure other labels (smart positioning or staggering)
- Positioning algorithm must be performant (no lag when rendering many labels)
- On small screens, labels may be abbreviated or rotated to fit
- Labels should be horizontally aligned when possible for easier scanning
- Use consistent formatting: date on one line, name on another, or both on same line depending on space
- Labels should visually connect to their dots (e.g., via subtle connector line if needed)

**Data & State:**
- Inputs:
  - Event data (date, name, position on arc)
  - Arc dimensions and curve coordinates
  - Available space for labels
- Outputs:
  - Rendered labels positioned near each event dot
  - Optional connector lines from labels to dots
- State rules:
  - Labels are always visible (no show/hide based on interaction)
  - Labels update when arc rebuilds (e.g., after drill-down)
  - Labels scale and reposition when viewport resizes
  - Selected event may have emphasized label (bolder, larger, or highlighted)

**Validation & Edge Cases:**
- Overlapping labels: implement collision detection and adjust positions (stagger vertically or offset)
- Very long event names: truncate with ellipsis (e.g., "The Invention of the...") and show full name on hover
- Very short event names: display fully without abbreviation
- Missing event name: show only date
- Missing date: show only event name with placeholder date
- Many events close together: reduce label font size or show only dates for close events
- Arc resize: recalculate label positions dynamically
- Rotated labels on mobile: ensure text remains readable (avoid excessive rotation angles)
- Events at arc endpoints: ensure labels don't overflow outside footer bounds

**Assumptions:**
- At any given drill-down level, there are at most 20-30 events visible
- Event names are reasonably short (average 2-5 words, max 50 characters)
- Dates are provided in a consistent format (e.g., year only, or "Month Year")
- Labels are rendered using SVG text elements or HTML positioned with CSS
- Sufficient vertical space exists above and below the arc for labels (footer is tall enough)
- For MVP, a simple positioning algorithm is acceptable (e.g., alternate above/below arc)
- If overlap is unavoidable, some labels may be abbreviated or rotated
- Label styling matches the game's overall design system

**Out of Scope (for this story):**
- Advanced label layout algorithms (e.g., force-directed placement)
- User-customizable label display (show/hide labels, toggle date/name)
- Animated label transitions when arc rebuilds
- Dynamic label sizing based on importance or player interaction
- Multi-language support for labels (MVP assumes English only)
- Voice-over or audio labels for accessibility
- Label search or filtering
- Custom label formatting based on event type (e.g., inventions vs. political events)

**Acceptance Criteria (Gherkin-style):**
- Given I view the timeline with events, when I look at the arc, then I see labels displaying event dates and names near each event dot
- Given labels are displayed, when I read them, then the text is clear and readable without zooming
- Given multiple events are close together, when I look at their labels, then the labels are positioned to minimize overlap and remain readable
- Given an event has a long name, when the label is displayed, then the name is truncated with ellipsis if necessary
- Given I hover over an event, when the hover is detected, then the corresponding label is emphasized or highlighted
- Given I resize the browser window, when the arc scales, then the labels reposition appropriately and remain readable
- Given I am on mobile, when I view the timeline, then labels are displayed in a mobile-friendly format (abbreviated or rotated if needed)
- Given I drill down into a segment, when the arc rebuilds, then labels for the new set of events are displayed correctly
- Given an event is at the edge of the arc, when I look at its label, then the label does not overflow outside the footer boundaries
