### User Story 6.1

**Number:** `6.1`
**ID:** `BA-US-conditional-game-loading`
**Role:** `player`
**Story:** `As a player, I want the event card's Game section to dynamically load the appropriate interface based on the event's security status so that I see the defense mini-game when the event is attacked and normal content when it is safe.`

**Context / Background:**
- The event card already has a "Game" section placeholder
- This section needs to become dynamic, showing different content based on event state
- When event security status is "safe" or "threatened" (but not yet attacked), no game should load
- When event security status is "attacked", the defense mini-game (quiz) should load immediately
- This story focuses solely on the conditional loading logic, not the game content itself
- Educational value: Signals to the player that something has changed and action is required

**Functional Requirements:**
1. Read the event's current security status from game state
2. Conditionally render the Game section content based on security status
3. If status is "safe" or "threatened": render nothing in the Game section (or show a neutral placeholder)
4. If status is "attacked": render the quiz game component in the Game section
5. Update the Game section reactively if event security status changes while the card is open
6. Ensure the component can handle state transitions smoothly without crashes or flickers

**Non-Functional / UX Requirements:**
- Status check must happen efficiently (under 50ms) to avoid UI lag
- Transition between empty state and game-loaded state should be smooth (no jarring flashes)
- Component should handle missing or invalid status gracefully (default to "safe" behavior)
- Must work consistently across desktop and mobile browsers
- Loading the quiz game should not cause the rest of the event card to re-render unnecessarily

**Data & State:**
- Inputs:
  - Event ID (to look up security status)
  - Event security status (safe / threatened / attacked)
  - Reference to the quiz game component (for rendering when attacked)
- Outputs:
  - Rendered Game section content (empty, placeholder, or quiz game)
- State rules:
  - Security status is read from a central game state store (not stored locally in the card)
  - Status changes trigger re-render of the Game section
  - If event card is closed and reopened, status is re-checked

**Validation & Edge Cases:**
- Event security status is null or undefined: treat as "safe" and show no game
- Event security status is an unrecognized value: log warning and treat as "safe"
- Security status changes from "attacked" to "safe" while game is active: immediately hide the game
- Player opens event card after status changed to "attacked": game should load immediately
- Multiple rapid status changes: debounce or use latest status only to prevent thrashing
- Quiz game component fails to load: show error message in Game section, do not crash the card

**Assumptions:**
- Event security status is stored in a global/shared game state (e.g., Redux, Context, or similar)
- The event card component already has a designated "Game section" UI area
- The quiz game component can be imported/loaded dynamically
- Status values are standardized strings: "safe", "threatened", "attacked"
- The event object/ID is available in the component's props or context
- Game state updates trigger React/framework re-renders automatically

**Out of Scope (for this story):**
- Implementing the quiz game itself (covered in story 6.3)
- Locking other tabs or hiding event info (covered in story 6.2)
- Determining when/how events become "attacked" (external game logic)
- Visual styling or animation of the transition
- Caching or preloading the quiz game component for performance

**Acceptance Criteria (Gherkin-style):**
- Given an event has security status "safe", when I view the event card, then the Game section is empty or shows a neutral placeholder
- Given an event has security status "threatened", when I view the event card, then the Game section is empty or shows a neutral placeholder
- Given an event has security status "attacked", when I view the event card, then the Game section displays the quiz game interface
- Given an event's status changes from "safe" to "attacked", when the event card is already open, then the Game section updates to show the quiz game without requiring a refresh
- Given an event's status changes from "attacked" to "safe", when the quiz game is displayed, then the game is immediately removed from the Game section
- Given the security status is missing or invalid, when I view the event card, then the Game section shows no game (defaults to safe behavior)
