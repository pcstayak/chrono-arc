### User Story 8.5

**Number:** `8.5`
**ID:** `BA-US-album-dual-type-integration`
**Role:** `player`
**Story:** `As a player, I want the album page to organize and display Event cards and Invention cards separately or with clear grouping so that I can easily browse my collection by type and appreciate the variety of content I've unlocked.`

**Context / Background:**
- This story integrates dual card types with the existing album/mastery system (Epic 7)
- The album is where players view their collected cards, unlock progress, and mastered cards
- With two card types, the album needs organization to prevent clutter and confusion
- Kids enjoy collecting and organizing (think Pokemon card binders, sticker albums)
- Clear organization by type enhances the collecting experience and sense of achievement
- This story builds on 8.1 (data model), 8.2 (visual distinction), and integrates with Epic 7 (album system)
- Educational value: Organizing cards by type reinforces the conceptual difference between events and inventions
- Design inspiration: Museum exhibits often separate artifacts by type or era; collectible albums have sections

**Functional Requirements:**
1. Add filtering options to album view: "All", "Events", "Inventions"
2. Display card type counts in album (e.g., "5 Events unlocked, 3 Inventions unlocked")
3. Visually group cards by type in album view (separate sections or tabs)
4. Apply type-specific visual styling (from Story 8.2) to album entries
5. Show mastery progress separately for Events and Inventions (e.g., "3/5 Events mastered, 2/3 Inventions mastered")
6. Allow sorting within each type (by year, by mastery progress, by unlock date)
7. Display type-specific icons or badges on album entries
8. Ensure filtering and grouping work on desktop and mobile views

**Non-Functional / UX Requirements:**
- Filtering must be instant (no loading delay when switching between All/Events/Inventions)
- Visual grouping should be clear and intuitive for kids (large section headers, distinct colors)
- Album view should not feel overwhelming with mixed types (clear organization prevents clutter)
- Type counts should be prominent and motivating (e.g., "Collect all 8 inventions!")
- Must work smoothly on mobile (touch-friendly filter buttons, responsive layout)
- Performance: filtering large collections should be fast (under 200ms for 50+ cards)
- Visual design should feel cohesive with rest of game (consistent styling)

**Data & State:**
- Inputs:
  - Player's unlocked cards (from mastery system)
  - Card type (from cardType field)
  - Mastery progress per card (from Epic 7)
  - Total card counts by type (for display)
- Outputs:
  - Filtered album view showing selected card type(s)
  - Type count display (e.g., "5/10 Events, 3/8 Inventions")
  - Visually grouped cards in album grid/list
  - Sort order applied within each type
- State rules:
  - Default view is "All" (show both types, grouped)
  - Filter selection is preserved during session (but not across page reloads, unless desired)
  - Mastery progress is tracked separately by type
  - Unlocked cards are always visible; locked cards show as silhouettes/placeholders
  - Card type grouping is automatic based on cardType field

**Validation & Edge Cases:**
- Player has no Events unlocked: Events section shows "No events unlocked yet"
- Player has no Inventions unlocked: Inventions section shows "No inventions unlocked yet"
- Player has all cards of one type: show celebratory message "All Events collected!"
- Filter selected with no matching cards: show friendly message "No inventions unlocked yet - keep exploring!"
- Mobile view with long lists: use scrollable sections or pagination
- Player switches filter rapidly: ensure UI doesn't flicker or break
- Card type is undefined: default to Events section
- Album with mixed mastery levels: show progress bars or indicators for each card
- Sorting within type produces ties (e.g., same year): use secondary sort (e.g., alphabetical)

**Assumptions:**
- The album page already exists (Epic 7) and displays cards in a grid or list
- Album displays both unlocked and locked cards (locked cards show as silhouettes)
- Filtering is client-side (no server request needed) for performance
- Grouping can be achieved with section headers or tabs (choose based on design preference)
- Suggested design: Tabs at top ("All", "Events", "Inventions") with count badges (e.g., "Events (5)")
- Alternative design: Single scrollable view with large section headers separating types
- Mastery progress (from Epic 7) is already tracked per card; this story just groups by type
- Sorting options include: Year (chronological), Mastery Progress (most to least), Unlock Date (newest first)
- Default sort is Year (chronological) for educational value (seeing history in order)
- For MVP, simple filtering is sufficient (no advanced search or multi-filter combinations)

**Out of Scope (for this story):**
- Search functionality within album (e.g., search by card name)
- Advanced filtering (e.g., "show only mastered inventions" or "show events from Ancient era")
- Custom album layouts or player-chosen organization
- Printing or exporting album views
- Social features (comparing albums with friends, sharing collections)
- Album statistics or analytics (e.g., "You're 60% complete on Events")
- Achievements for collecting all cards of a type
- Album themes or skins
- Drag-and-drop reordering of cards
- Notes or annotations on album entries
- Album view showing relationships between cards (network graph)

**Acceptance Criteria (Gherkin-style):**
- Given I open the album page, when the page loads, then I see filter options for "All", "Events", and "Inventions"
- Given I click the "Events" filter, when the filter is applied, then I see only Event cards displayed
- Given I click the "Inventions" filter, when the filter is applied, then I see only Invention cards displayed
- Given I view the album, when I look at the header or summary, then I see counts for each type (e.g., "5 Events, 3 Inventions")
- Given I view the "All" tab, when I scroll through the album, then I see clear visual grouping with section headers ("Events" and "Inventions")
- Given I view an album entry, when I look at the card, then I see type-specific styling (color, icon, border from Story 8.2)
- Given I have mastered some cards, when I view the album, then I see mastery progress indicators for each card
- Given I filter by "Inventions", when I sort by Year, then cards are displayed in chronological order
- Given I am on mobile, when I use the filter tabs, then they are touch-friendly and the layout remains clear
- Given I have no Inventions unlocked, when I view the "Inventions" tab, then I see a friendly message "No inventions unlocked yet - keep exploring!"
- Given I have unlocked all Events, when I view the "Events" section, then I see a celebratory message "All Events collected!"
